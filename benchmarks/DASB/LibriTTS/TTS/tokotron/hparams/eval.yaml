eval_dataset: valid
eval_suffix: ""
eval_sample_rate: 16000
eval_spk_sim_sample_rate: 16000
eval_samples: null
eval_subset: null
eval_asr_beam_size: 66
eval_asr_type: encoder_decoder
eval_asr_source: !apply:speechbrain.utils.hparams.choice
  value: !ref <eval_asr_type>
  choices:
    encoder_decoder: speechbrain/asr-transformer-transformerlm-librispeech
    whisper: openai/whisper-small
eval_spk_sim_source: microsoft/wavlm-base-sv
evaluations: utmos,asr,spk_sim
output_folder: !PLACEHOLDER
pretrained_model_save_folder: null
tmp_folder: null
utmos_batch_size: 8
utmos_model_path: null
utmos_ckpt_name: epoch=3-step=7459.ckpt
utmos_ckpt_path: !ref <utmos_model_path>/<utmos_ckpt_name>
utmos_use_python: True
utmos_script: predict.py


eval_asr: !apply:speechbrain.utils.hparams.choice
  value: !ref <eval_asr_type>
  choices:
    encoder_decoder: !name:benchmarks.DASB.utils.eval.EncoderDecoderASRSpeechEvaluator
      source: !ref <eval_asr_source>
      sample_rate: !ref <eval_sample_rate>
      overrides:
        lm_weight: 0.0
        test_beam_size: !ref <eval_asr_beam_size>
    whisper: !name:benchmarks.DASB.utils.eval.WhisperASRSpeechEvaluator
      source: !ref <eval_asr_source>
      sample_rate: !ref <eval_sample_rate>
      savedir: !ref <pretrained_model_save_folder>

eval_spk_sim: !name:benchmarks.DASB.utils.eval.SpkSimWavLM
  source: !ref <eval_spk_sim_source>
  savedir: !ref <pretrained_model_save_folder>
  model_sample_rate: !ref <eval_spk_sim_sample_rate>

evaluators:
  asr: !ref <eval_asr>
  spk_sim: !ref <eval_spk_sim>

bulk_evaluators:
  utmos: !name:benchmarks.DASB.utils.eval.UTMOSSpeechEvaluator
    model_path: !ref <utmos_model_path>
    output_folder: !ref <output_folder>
    ckpt_path: !ref <utmos_ckpt_path>
    batch_size: !ref <utmos_batch_size>
    script: !ref <utmos_script>
    use_python: !ref <utmos_use_python>
    tmp_folder: !ref <tmp_folder>

eval_summary:
  asr:
    descriptive: ["wer", "cer", "wer_ref", "cer_ref", "dwer", "dcer"]
  utmos:
    descriptive: ["utmos"]
  spk_sim:
    descriptive: ["score"]

